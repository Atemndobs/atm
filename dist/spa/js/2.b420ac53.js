(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"04b7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"constrain q-pa-md"},[a("div",{staticClass:"row q-col-gutter-lg"},[a("div",{staticClass:"col-12 col-sm-8"},[!t.loadingPosts&&t.posts.length?t._l(t.posts,(function(e,o){return a("q-card",{key:e.id,staticClass:"card-post q-mb-md",attrs:{bordered:"",flat:""}},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",[a("img",{attrs:{src:s("63d0")}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-bold"}),a("q-item-label",{attrs:{caption:""}},[t._v("\n                    "+t._s(e.location)+"\n                  ")])],1)],1),a("q-separator"),a("q-img",{attrs:{src:e.imageUrl}}),a("q-card-section",[a("q-item-section",[a("q-item-label",{staticClass:"text-bold"}),a("q-item-label",{attrs:{caption:""}},[a("q-item",[a("q-item-section",[a("div",[t._v(t._s(e.caption))]),a("div",{staticClass:"text-caption text-grey"},[t._v(t._s(t._f("niceDate")(e.created_at)))])]),a("q-item-section",[a("div",[t._v(t._s(e.new_comment.comment))]),a("div",{staticClass:"text-caption text-grey"},[t._v(t._s(t._f("niceDate")(e.created_at)))])]),a("q-btn",{attrs:{rounded:"",dense:"",label:e.likes.likes_count},on:{click:function(s){return t.submitLike(e)}}},[a("q-icon",{attrs:{name:t.reactionType,color:t.isLiked?"red":"",size:"25px",rounded:""}})],1)],1),a("div",{staticClass:"row justify-center q-ma-md"},[a("q-input",{staticClass:"col col-sm-6",attrs:{label:"Comment*",dense:""},on:{keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),t.addComment(e.comment,e))}},model:{value:e.comment,callback:function(s){t.$set(e,"comment",s)},expression:"post.comment"}})],1)],1)],1),a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",icon:"eva-message-circle-outline",label:"View Comments",caption:e.comments_count+" comments","default-closed":""}},t._l(e.comments,(function(e,s){return a("q-chat-message",{key:e.id,attrs:{name:e.commenter.name,avatar:e.commenter.photo_url,text:[e.comment],size:"6",stamp:t._f("niceDate")(e.created_at),"text-color":"white","bg-color":"primary"}})})),1)],1)],1)],1)})):t.loadingPosts||t.posts.length?[a("div",{staticClass:"q-pa-md"},[a("q-card",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-skeleton",{attrs:{type:"QAvatar",animation:"fade",size:"40"}})],1),a("q-item-section",[a("q-item-label",[a("q-skeleton",{attrs:{type:"text"}})],1),a("q-item-label",{attrs:{caption:""}},[a("q-skeleton",{attrs:{type:"text"}})],1)],1)],1),a("q-skeleton",{attrs:{height:"200px",square:""}}),a("q-card-actions",{staticClass:"q-gutter-md",attrs:{align:"right"}},[a("q-skeleton",{attrs:{type:"QBtn"}}),a("q-skeleton",{attrs:{type:"QBtn"}})],1)],1)],1)]:[a("h5",{staticClass:"text-center text-grey"},[t._v("\n            No POSTS HERE\n          ")])]],2),a("div",{staticClass:"col-4 large-screen-only"},[a("q-item",{staticClass:"fixed"},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"48px"}},[a("img",{attrs:{src:s("63d0")}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[t._v("atem__ndobs")]),a("q-item-label",{attrs:{caption:""}},[t._v("\n                 "+t._s(this.$auth.user()?this.$auth.user().name:"Atemkeng")+"\n              ")])],1)],1)],1)])])},o=[],n=(s("26e9"),s("b178")),i=s("bc3a"),c=s.n(i),r={name:"Page",data:function(){return{posts:[],comments:{},commentBox:"",loadingPosts:!1,totalLikes:"",isLiked:!1,reactionType:"eva-heart-outline"}},filters:{niceDate:function(t){return n["c"].formatDate(t,"MMMM D h:mmA")}},methods:{getPosts:function(){var t=this;this.loadingPosts=!0,this.$axios.get("".concat("https://atemkeng.com/api","/posts")).then((function(e){t.posts=e.data.data.reverse(),t.loadingPosts=!1})).catch((function(e){console.log(e),t.$q.dialog({title:"Error",message:"Oops something went wrong, pls contact Atem"}),t.loadingPosts=!1}))},submitLike:function(t){var e=this;if(!this.$auth.check())return this.$q.dialog({message:"You need to Login Before you can Like"}),this.$router.push("/login"),void console.log({Error:"You need to log in to react to a post"});var s=this.$auth.user().id,a="https://atemkeng.com/api/posts/like/"+t.id,o={user_id:s,type:"Like",post:t};c.a.post(a,o).then((function(t){var s=t.data.data.likes.reaction_type;"Like"===s?(e.reactionType="eva-heart",e.isLiked=!0):(e.reactionType="eva-heart-outline",e.isLiked=!1),console.log(t.data.data.likes.likes_count)})).catch((function(t){console.log(t)}))},addComment:function(t,e){var s=this;if(console.log("Post Comment"),!this.$auth.check())return this.$q.dialog({message:"You need to Login Before you can Like"}),this.$router.push("/login"),void console.log({Error:"You need to log in to react to a post"});var a=this.$auth.user().id,o="https://atemkeng.com/api/posts/comment/"+e.id,n={user_id:a,comment:t,post:e};console.log("COMMENTATBL:=>    "+e.id),console.log("POST DATA:=>    "+t),c.a.post(o,n).then((function(t){t.data.data.new_comment;s.comment="",console.log(s.comment),console.log(t.data.data)})).catch((function(t){console.log(t)}))}},created:function(){this.getPosts()}},l=r,m=(s("7d72"),s("2877")),d=Object(m["a"])(l,a,o,!1,null,"22d63352",null);e["default"]=d.exports},"63d0":function(t,e,s){t.exports=s.p+"img/avat_atem.79940818.png"},"7b4e":function(t,e,s){},"7d72":function(t,e,s){"use strict";s("7b4e")}}]);